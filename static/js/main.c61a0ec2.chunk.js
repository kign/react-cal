(this["webpackJsonpreact-cal"]=this["webpackJsonpreact-cal"]||[]).push([[0],{19:function(t,e,a){},21:function(t,e,a){"use strict";a.r(e);var r=a(1),s=a.n(r),n=a(13),i=a.n(n),c=(a(19),a(14)),o=a(11),l=a(2),h=a(3),u=a(5),d=a(4),p=a(9),j=a(12),y=a(0),f=function(t){Object(u.a)(a,t);var e=Object(d.a)(a);function a(t){var r;return Object(l.a)(this,a),(r=e.call(this,t)).state={today:a.today()},r}return Object(h.a)(a,[{key:"date",value:function(t){var e=[this.props.cal.year,this.props.cal.month+t[0]],a=e[0],r=e[1];return r>12&&(r-=12,a++),r<1&&(r+=12,a--),{year:a,month:r,day:t[1]}}},{key:"first_date",value:function(){return new Date(this.props.cal.year,this.props.cal.month-1,1)}},{key:"number_grid",value:Object(j.a)().mark((function t(){var e,a,r,s,n,i,c;return Object(j.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=this.first_date(),(a=this.first_date()).setDate(1-e.getDay()),r=-1;case 4:if(!(r<1)){t.next=11;break}for(s=[],n=0;n<7;n++)i=[a.getFullYear(),a.getMonth(),a.getDate()],c=i[2],r=12*i[0]+i[1]-12*this.props.cal.year-this.props.cal.month+1,s.push([r,c]),a.setDate(c+1);return t.next=9,s;case 9:t.next=4;break;case 11:case"end":return t.stop()}}),t,this)}))},{key:"day_style",value:function(t,e){if(0===t){var r=12*this.state.today.year+this.state.today.month-12*this.props.cal.year-this.props.cal.month;return e[0]===r&&e[1]===this.state.today.day}if(1===t){var s=12*this.props.sel.year+this.props.sel.month-12*this.props.cal.year-this.props.cal.month;return e[0]===s&&e[1]===this.props.sel.day}if(2===t)return 0!==e[0];if(3===t){var n=this.date(e),i=a.make_key(n);return 0>a.cmp(n,this.state.today)&&this.props.totals[i]&&this.props.totals[i][1]}if(4===t){var c=this.date(e),o=a.make_key(c);return 0<a.cmp(c,this.state.today)&&this.props.totals[o]&&this.props.totals[o][0]}}},{key:"click",value:function(t){var e=this.date(t);a.cmp(e,this.props.sel)&&(this.props.select(e),0!==t[0]&&this.props.scroll(t[0]))}},{key:"render",value:function(){var t=this;return Object(y.jsxs)("td",{style:{verticalAlign:"top"},children:[Object(y.jsx)("table",{style:{width:"100%"},children:Object(y.jsx)("tbody",{children:Object(y.jsxs)("tr",{children:[Object(y.jsx)("td",{align:"left",children:Object(y.jsx)("span",{onClick:function(){return t.props.scroll(-1)},children:"\u2190"})}),Object(y.jsxs)("td",{align:"center",children:[this.props.cal.year," - ",this.first_date().toLocaleString("default",{month:"long"})]}),Object(y.jsx)("td",{align:"right",children:Object(y.jsx)("span",{onClick:function(){return t.props.scroll(1)},children:"\u2192"})})]})})}),Object(y.jsxs)("table",{style:{width:"100%"},children:[Object(y.jsx)("thead",{children:Object(y.jsxs)("tr",{children:[Object(y.jsx)("th",{children:"S"}),Object(y.jsx)("th",{children:"M"}),Object(y.jsx)("th",{children:"T"}),Object(y.jsx)("th",{children:"W"}),Object(y.jsx)("th",{children:"T"}),Object(y.jsx)("th",{children:"F"}),Object(y.jsx)("th",{children:"S"})]})}),Object(y.jsx)("tbody",{children:Object(p.a)(this.number_grid()).map((function(e,a){return Object(y.jsx)("tr",{children:e.map((function(e,a){return Object(y.jsx)("td",{onClick:function(){return t.click(e)},style:{textAlign:"center"},className:[[0,"today"],[1,"selected"],[2,"other"],[3,"past"],[4,"future"]].filter((function(a){return t.day_style(a[0],e)})).map((function(t){return t[1]})).join(" "),children:e[1]},a)}))},a)}))})]})]})}}],[{key:"today",value:function(){var t=new Date;return{year:t.getFullYear(),month:t.getMonth()+1,day:t.getDate()}}},{key:"cmp",value:function(t,e){return t.year>e.year?1:t.year<e.year?-1:t.month>e.month?1:t.month<e.month?-1:t.day>e.day?1:t.day<e.day?-1:0}},{key:"make_key",value:function(t){return t.year+("00"+t.month).slice(-2)+("00"+t.day).slice(-2)}}]),a}(s.a.Component),b=function(t){Object(u.a)(a,t);var e=Object(d.a)(a);function a(t){var r;return Object(l.a)(this,a),(r=e.call(this,t)).state={edit:null},r}return Object(h.a)(a,[{key:"onKeyUp",value:function(t){13===t.keyCode&&(this.commit(t.target.value),null===this.state.edit&&(t.target.value=""))}},{key:"commit",value:function(t){var e=Object(p.a)(this.props.items);null!==this.state.edit?(e[this.state.edit]=[0,this.inputValue],this.setState({edit:null})):e.push([0,t]),this.props.update(e)}},{key:"check",value:function(t){this.props.update(this.props.items.map((function(e,a){return[a===t?1-e[0]:e[0],e[1]]})))}},{key:"edit",value:function(t){this.state.edit!==t&&(null!==this.state.edit&&this.commit("-"),null!==t&&(this.inputValue=this.props.items[t][1]),this.setState({edit:t}))}},{key:"input",value:function(t,e){var a=this;return Object(y.jsx)("input",{onClick:function(){e&&a.edit(null)},placeholder:e,onChange:function(t){return a.inputValue=t.target.value},onKeyUp:function(t){return a.onKeyUp(t)},defaultValue:t})}},{key:"render",value:function(){var t=this;return Object(y.jsx)("table",{children:Object(y.jsxs)("tbody",{children:[this.props.items.map((function(e,a){return Object(y.jsxs)("tr",{children:[Object(y.jsx)("td",{onClick:function(){return t.check(a)},style:e[0]?{color:"green"}:{},children:e[0]?"\u2714":"\ufe0e\u25a2"}),Object(y.jsx)("td",{children:t.state.edit===a?t.input(e[1],""):Object(y.jsx)("span",{onClick:function(){return t.edit(a)},children:e[1]})})]},a)})),Object(y.jsxs)("tr",{children:[Object(y.jsx)("td",{children:"\uff0b"}),Object(y.jsx)("td",{children:this.input("","New item")})]})]})})}}]),a}(s.a.Component),O=function(t){Object(u.a)(a,t);var e=Object(d.a)(a);function a(t){var r;Object(l.a)(this,a),r=e.call(this,t);for(var s=new Date,n={},i=0;i<localStorage.length;i++){var c=localStorage.key(i);if(/^[0-9]{8}$/.test(c)){var h,u=JSON.parse(localStorage.getItem(c)),d=[0,0],p=Object(o.a)(u);try{for(p.s();!(h=p.n()).done;){d[h.value[0]?0:1]++}}catch(O){p.e(O)}finally{p.f()}n[c]=[d[0]+d[1]>0,d[1]>0]}}var j=[s.getFullYear(),s.getMonth()+1,s.getDate()],y=j[0],f=j[1],b={year:y,month:f,day:j[2]};return r.state={cal:{year:y,month:f},todo:b,todolist:r.retrieve(b),daysTotals:n},r}return Object(h.a)(a,[{key:"update",value:function(t){var e=f.make_key(this.state.todo);t=t.filter((function(t){return t[1]})),localStorage.setItem(e,JSON.stringify(t));var a,r=[0,0],s=Object(o.a)(t);try{for(s.s();!(a=s.n()).done;){r[a.value[0]?0:1]++}}catch(l){s.e(l)}finally{s.f()}var n=[r[0]+r[1]>0,r[1]>0];if(!this.state.daysTotals[e]||n[0]!==this.state.daysTotals[e][0]||n[1]!==this.state.daysTotals[e][1]){var i=Object(c.a)({},this.state.daysTotals);i[e]=n,this.setState({daysTotals:i})}this.setState({todolist:t})}},{key:"retrieve",value:function(t){var e=localStorage.getItem(f.make_key(t));return e?JSON.parse(e):[]}},{key:"scrollMonth",value:function(t){var e=[this.state.cal.month,this.state.cal.year],a=e[0],r=e[1];for(a+=t;a>12;)a-=12,r++;for(;a<1;)a+=12,r--;this.setState({cal:{year:r,month:a}})}},{key:"show_date",value:function(t){return new Date(t.year,t.month-1,t.day).toLocaleString("default",{month:"long"})+" "+t.day+", "+t.year}},{key:"select",value:function(t){this.setState({todo:t,todolist:this.retrieve(t)})}},{key:"render",value:function(){var t=this;return Object(y.jsx)("table",{children:Object(y.jsx)("tbody",{children:Object(y.jsxs)("tr",{children:[Object(y.jsx)(f,{cal:this.state.cal,sel:this.state.todo,totals:this.state.daysTotals,scroll:function(e){return t.scrollMonth(e)},select:function(e){return t.select(e)}}),Object(y.jsx)("td",{style:{width:"10px",borderRight:"solid 1px black"},children:"\xa0"}),Object(y.jsxs)("td",{style:{verticalAlign:"top"},children:[Object(y.jsxs)("div",{style:{textAlign:"center",marginBottom:"5px"},children:["  ",this.show_date(this.state.todo)]}),Object(y.jsx)(b,{items:this.state.todolist,update:function(e){return t.update(e)}})]})]})})})}}]),a}(s.a.Component);i.a.render(Object(y.jsx)(s.a.StrictMode,{children:Object(y.jsx)(O,{})}),document.getElementById("root"))}},[[21,1,2]]]);
//# sourceMappingURL=main.c61a0ec2.chunk.js.map